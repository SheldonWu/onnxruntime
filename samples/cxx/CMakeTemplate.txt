cmake_minimum_required(VERSION 3.24)

set(CMAKE_CXX_STANDARD 17)
#set(CMAKE_BUILD_TYPE "Debug|RelWithDebInfo|Release")

set(ORT_ROOTDIR "/workspace/onnxruntime")
set(ORT_OUTDIR "${ORT_ROOTDIR}/build/Linux/RelWithDebInfo")
set(ORT_LIBDIR "${ORT_ROOTDIR}/build/Linux/RelWithDebInfo")

include_directories("${ORT_ROOTDIR}/include"                           # Pre-built package
                    "${ORT_ROOTDIR}/include/onnxruntime"               # Linux local install to /usr/local
                    "${ORT_ROOTDIR}/include/onnxruntime/core/session") # Windows local install

link_directories(${ORT_LIBDIR})

# change default C/CXX flagas to make Debugging easy
if (${CMAKE_BUILD_TYPE} STREQUAL "RelWithDebInfo")
    message("Default " ${CMAKE_BUILD_TYPE} ":" ${CMAKE_CXX_FLAGS_RELWITHDEBINFO})
    set(CMAKE_CXX_FLAGS_RELWITHDEBINFO " -O0 -g -DNDEBUG")
    set(CMAKE_C_FLAGS_RELWITHDEBINFO " -O0 -g -DNDEBUG")
    message("Change to : " ${CMAKE_CXX_FLAGS_RELWITHDEBINFO})
endif()


# static library
#set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
#set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${ORT_OUTDIR})


#if(onnxruntime_USE_CUDA)
#  add_definitions(-DUSE_CUDA)
#endif()
#if(onnxruntime_USE_TENSORRT)
#  add_definitions(-DUSE_TENSORRT)
#endif()
#if(onnxruntime_USE_DML)
#  message("Enabling DML")
#  add_definitions(-DUSE_DML)
#endif()
